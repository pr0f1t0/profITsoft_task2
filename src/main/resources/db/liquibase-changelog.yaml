databaseChangeLog:
  - changeSet:
      id: 1-create-tables
      author: developer
      changes:
        - createTable:
            tableName: manufacturer
            columns:
              - column:
                  name: id
                  type: UUID
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(255)

        - createTable:
            tableName: laptop
            columns:
              - column:
                  name: id
                  type: UUID
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: model
                  type: VARCHAR(255)
              - column:
                  name: price
                  type: DOUBLE
              - column:
                  name: ram
                  type: INT
              - column:
                  name: storage
                  type: INT
              - column:
                  name: manufacturer_id
                  type: UUID
                  constraints:
                    nullable: false

        - createTable:
            tableName: laptop_ports
            columns:
              - column:
                  name: laptop_id
                  type: UUID
                  constraints:
                    nullable: false
              - column:
                  name: ports
                  type: VARCHAR(255)

        - addForeignKeyConstraint:
            constraintName: fk_laptop_manufacturer
            baseTableName: laptop
            baseColumnNames: manufacturer_id
            referencedTableName: manufacturer
            referencedColumnNames: id

        - addForeignKeyConstraint:
            constraintName: fk_laptop_ports_laptop
            baseTableName: laptop_ports
            baseColumnNames: laptop_id
            referencedTableName: laptop
            referencedColumnNames: id

  - changeSet:
      id: 2-insert-data
      author: developer
      changes:
        - insert:
            tableName: manufacturer
            columns:
              - column: {name: id, value: "11111111-1111-1111-1111-111111111111"}
              - column: {name: name, value: "Apple"}
        - insert:
            tableName: manufacturer
            columns:
              - column: {name: id, value: "22222222-2222-2222-2222-222222222222"}
              - column: {name: name, value: "Dell"}

        - insert:
            tableName: laptop
            columns:
              - column: {name: id, value: "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"}
              - column: {name: model, value: "MacBook Pro 16"}
              - column: {name: price, valueNumeric: 2499.99}
              - column: {name: ram, valueNumeric: 32}
              - column: {name: storage, valueNumeric: 1024}
              - column: {name: manufacturer_id, value: "11111111-1111-1111-1111-111111111111"}

        - insert:
            tableName: laptop_ports
            columns:
              - column: {name: laptop_id, value: "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"}
              - column: {name: ports, value: "Thunderbolt 4"}
        - insert:
            tableName: laptop_ports
            columns:
              - column: {name: laptop_id, value: "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"}
              - column: {name: ports, value: "HDMI"}
        - insert:
            tableName: laptop_ports
            columns:
              - column: {name: laptop_id, value: "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"}
              - column: {name: ports, value: "MagSafe 3"}

        - insert:
            tableName: laptop
            columns:
              - column: {name: id, value: "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb"}
              - column: {name: model, value: "XPS 15"}
              - column: {name: price, valueNumeric: 1899.50}
              - column: {name: ram, valueNumeric: 16}
              - column: {name: storage, valueNumeric: 512}
              - column: {name: manufacturer_id, value: "22222222-2222-2222-2222-222222222222"}

        - insert:
            tableName: laptop_ports
            columns:
              - column: {name: laptop_id, value: "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb"}
              - column: {name: ports, value: "USB-C"}
        - insert:
            tableName: laptop_ports
            columns:
              - column: {name: laptop_id, value: "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb"}
              - column: {name: ports, value: "SD Card Reader"}